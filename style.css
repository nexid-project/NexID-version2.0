/* Fuentes base */
.font-inter { font-family: 'Inter', sans-serif; }
.font-lora { font-family: 'Lora', serif; }
.font-roboto-mono { font-family: 'Roboto Mono', monospace; }
.font-playfair-display { font-family: 'Playfair Display', serif; }
.font-poppins { font-family: 'Poppins', sans-serif; }
.font-jetbrains-mono { font-family: 'JetBrains Mono', monospace; }
.font-lato { font-family: 'Lato', sans-serif; }
.font-montserrat { font-family: 'Montserrat', sans-serif; }
.font-oswald { font-family: 'Oswald', sans-serif; }
.font-lobster { font-family: 'Lobster', cursive; }

#main-header button {
	font-family: 'Inter', sans-serif;
}

.hidden { display: none; }

/* --- Definiciones de Plantillas (Temas) --- */
.theme-negro { --background: #111827; --text-color: #f9fafb; --button-bg: #4b5563; --button-text-color: #ffffff; --button-hover-bg: #6b7280; --profile-border-color: #9ca3af; --overlay-rgb: 17, 24, 39; --accent: #38bdf8; }
.theme-blanco { --background: #f8fafc; --text-color: #1e293b; --button-bg: #334155; --button-text-color: #ffffff; --button-hover-bg: #475569; --profile-border-color: #64748b; --overlay-rgb: 248, 250, 252; --accent: #3b82f6; }
.theme-azul { --background: #1e40af; --text-color: #ffffff; --button-bg: #93c5fd; --button-text-color: #1e40af; --button-hover-bg: #dbeafe; --profile-border-color: #bfdbfe; --overlay-rgb: 30, 64, 175; --accent: #93c5fd; }
.theme-rojo { --background: #991b1b; --text-color: #ffffff; --button-bg: #fecaca; --button-text-color: #991b1b; --button-hover-bg: #fee2e2; --profile-border-color: #fca5a5; --overlay-rgb: 153, 27, 27; --accent: #fca5a5; }
.theme-verde { --background: #166534; --text-color: #ffffff; --button-bg: #bbf7d0; --button-text-color: #166534; --button-hover-bg: #dcfce7; --profile-border-color: #86efac; --overlay-rgb: 22, 101, 52; --accent: #86efac; }
.theme-atardecer { --background: #86198f; --text-color: #ffffff; --button-bg: #fde047; --button-text-color: #86198f; --button-hover-bg: #fef08a; --profile-border-color: #c026d3; --overlay-rgb: 134, 25, 143; --accent: #fde047; }
.theme-neon { --background: #0c0a09; --text-color: #f0fdf4; --button-bg: #ec4899; --button-text-color: #ffffff; --button-hover-bg: #f9a8d4; --profile-border-color: #22d3ee; --overlay-rgb: 12, 10, 9; --accent: #ec4899; }
.theme-tropical { --background: #06b6d4; --text-color: #ffffff; --button-bg: #fb923c; --button-text-color: #0e7490; --button-hover-bg: #fed7aa; --profile-border-color: #0e7490; --overlay-rgb: 6, 182, 212; --accent: #fb923c; }
.theme-galaxia { --background: #4c1d95; --text-color: #ede9fe; --button-bg: #facc15; --button-text-color: #4c1d95; --button-hover-bg: #fde047; --profile-border-color: #a78bfa; --overlay-rgb: 76, 29, 149; --accent: #facc15; }
.theme-citrico { --background: #facc15; --text-color: #44403c; --button-bg: #84cc16; --button-text-color: #1c1917; --button-hover-bg: #a3e635; --profile-border-color: #44403c; --overlay-rgb: 250, 204, 21; --accent: #84cc16; }
.theme-grafito { --background: #1a202c; --text-color: #e2e8f0; --button-bg: #06b6d4; --button-text-color: #ffffff; --button-hover-bg: #22d3ee; --profile-border-color: #0891b2; --overlay-rgb: 26, 32, 44; --accent: #06b6d4; }
.theme-serenidad { --background: #e0e7ff; --text-color: #3730a3; --button-bg: #6366f1; --button-text-color: #ffffff; --button-hover-bg: #818cf8; --profile-border-color: #a5b4fc; --overlay-rgb: 224, 231, 255; --accent: #6366f1; }
.theme-menta { --background: #f0fdfa; --text-color: #1f2937; --button-bg: #374151; --button-text-color: #ffffff; --button-hover-bg: #4b5563; --profile-border-color: #9ca3af; --overlay-rgb: 240, 253, 250; --accent: #14b8a6; }
.theme-pizarra { --background: #475569; --text-color: #f1f5f9; --button-bg: #f97316; --button-text-color: #ffffff; --button-hover-bg: #fb923c; --profile-border-color: #94a3b8; --overlay-rgb: 71, 85, 105; --accent: #f97316; }
.theme-concreto { --background: #e5e7eb; --text-color: #111827; --button-bg: #111827; --button-text-color: #ffffff; --button-hover-bg: #1f2937; --profile-border-color: #9ca3af; --overlay-rgb: 229, 231, 235; --accent: #111827; }
.theme-terra { --background: #f5f5f4; --text-color: #57534e; --button-bg: #a16207; --button-text-color: #ffffff; --button-hover-bg: #ca8a04; --profile-border-color: #d6d3d1; --overlay-rgb: 245, 245, 244; --accent: #a16207; }
.theme-amanecer { --background: #fef3c7; --text-color: #92400e; --button-bg: #f97316; --button-text-color: #ffffff; --button-hover-bg: #fb923c; --profile-border-color: #fcd34d; --overlay-rgb: 254, 243, 199; --accent: #f97316; }
.theme-oceano { --background: #0c2f57; --text-color: #e0f2fe; --button-bg: #ca8a04; --button-text-color: #ffffff; --button-hover-bg: #eab308; --profile-border-color: #7dd3fc; --overlay-rgb: 12, 47, 87; --accent: #ca8a04; }
.theme-marmol { --background: #fafafa; --text-color: #262626; --button-bg: #f472b6; --button-text-color: #ffffff; --button-hover-bg: #f9a8d4; --profile-border-color: #e5e5e5; --overlay-rgb: 250, 250, 250; --accent: #f472b6; }
.theme-vino { --background: #581c87; --text-color: #f3e8ff; --button-bg: #fcd34d; --button-text-color: #581c87; --button-hover-bg: #fde047; --profile-border-color: #e9d5ff; --overlay-rgb: 88, 28, 135; --accent: #fcd34d; }

#global-background { position: fixed; top: 0; left: 0; right: 0; height: 100lvh; z-index: -1; background-size: cover; background-position: center; opacity: 0; transition: opacity 0.3s ease-in-out; }
#profile-page { background-color: transparent; color: var(--text-color); min-height: 100lvh; }

#profile-page h1, #profile-page p { color: var(--text-color); }
#profile-page #public-profile-img { border-color: var(--profile-border-color); cursor: zoom-in; }
#profile-page .public-link-button { transition: all 0.3s ease; }
#profile-page .public-link-button:hover { transform: scale(1.03); color: var(--button-hover-text-color, var(--button-text-color)); }

.sortable-fallback #public-profile-img { border-color: var(--profile-border-color); }
#profile-page .btn-filled, .sortable-fallback .btn-filled { background-color: var(--button-bg); color: var(--button-text-color); }
#profile-page .btn-filled:hover { background-color: var(--button-hover-bg); }
#profile-page .btn-outline, .sortable-fallback .btn-outline { background-color: transparent; color: var(--button-bg); border: 2px solid var(--button-bg); }
#profile-page .btn-outline:hover { background-color: var(--button-bg); color: var(--button-text-color); }
#profile-page .btn-shadow, .sortable-fallback .btn-shadow { background-color: var(--button-bg); color: var(--button-text-color); box-shadow: 4px 4px 0px var(--profile-border-color); }
#profile-page .btn-shadow:hover { box-shadow: 6px 6px 0px var(--profile-border-color); transform: translate(-2px, -2px);}	

@keyframes pulse {
	0%, 100% { transform: scale(1); }
	50% { transform: scale(1.05); }
}
@keyframes glow {
	0%, 100% { box-shadow: 0 0 5px #22d3ee, 0 0 10px #22d3ee, 0 0 15px #22d3ee; }
	50% { box-shadow: 0 0 10px #2dd4bf, 0 0 20px #2dd4bf, 0 0 30px #2dd4bf; }
}
@keyframes latent-glow {
	from {
		box-shadow: 0 0 4px -1px #22d3ee, 0 0 7px -2px #22d3ee;
	}
	to {
		box-shadow: 0 0 8px 0px #2dd4bf, 0 0 14px -1px #2dd4bf;
	}
}

.join-nexid-button {
	background-color: var(--text-color);
	color: var(--background);
	animation: pulse 2.5s infinite cubic-bezier(0.4, 0, 0.6, 1), glow 3s infinite alternate;
}

#settings-panel {
	position: fixed;
	bottom: 0;
	left: 0;
	right: 0;
	height: 60vh;
	transform: translateY(100%);
	transition: transform 0.3s cubic-bezier(0.32, 0.72, 0, 1), height 0s;
	border-top-left-radius: 1.5rem;
	border-top-right-radius: 1.5rem;
	overflow: hidden;
	display: flex;
	flex-direction: column;
	z-index: 50;
}
#settings-panel.open {
	transform: translateY(0);
}
@media (min-width: 640px) {
	#settings-panel {
		top: 0;
		right: 0;
		left: auto;
		bottom: auto;
		height: 100%;
		width: 100%;
		max-width: 28rem;
		transform: translateX(100%);
		border-radius: 0;
		overflow-y: auto;
		display: block;
	}
	#settings-panel.open {
		transform: translateX(0);
	}
}

.theme-option.selected { box-shadow: 0 0 0 3px #34d399; transform: scale(1.1); }
.edit-link-trigger { cursor: pointer; }

.theme-tab-btn { flex-grow: 1; padding: 0.75rem 0.5rem; font-weight: 600; color: #9ca3af; border-bottom: 2px solid transparent; transition: all 0.2s ease-in-out; text-align: center; }
.theme-tab-btn:hover { color: #e5e7eb; }
.theme-tab-btn.active { color: #67e8f9; border-bottom-color: #67e8f9; }
.theme-tab-content { display: none; padding-top: 1rem; }
.theme-tab-content.active { display: block; }

#gemini-modal .gemini-content { background: linear-gradient(145deg, #2d3748, #1a202c); }
#gemini-results-container .gemini-option-label { display: block; padding: 1rem; border-radius: 0.75rem; border: 1px solid #4a5568; cursor: pointer; transition: all 0.2s ease-in-out; background-color: rgba(255, 255, 255, 0.05); }
#gemini-results-container .gemini-option-label:hover { background-color: rgba(255, 255, 255, 0.1); transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
#gemini-results-container .gemini-option-label.selected { background-color: #3730a3; border-color: #818cf8; box-shadow: 0 0 0 2px #4f46e5; }

#panorama-grid {
	position: fixed;
	inset: 0;
	background-image:	
		repeating-linear-gradient(to right, rgba(107, 114, 128, 0.2) 0, rgba(107, 114, 128, 0.2) 1px, transparent 1px, transparent 40px),
		repeating-linear-gradient(to bottom, rgba(107, 114, 128, 0.2) 0, rgba(107, 114, 128, 0.2) 1px, transparent 1px, transparent 40px);
	z-index: -1;
	opacity: 0;
	transition: opacity 0.3s ease-in-out;
}
#profile-page.panorama-active #panorama-grid {
	opacity: 1;
}
#profile-page.panorama-active .content-wrapper {
	transform: scale(0.85);
	box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
	border-radius: 1.5rem;
	padding-top: 2rem;
	padding-bottom: 2rem;
}
.content-wrapper {
	transition: box-shadow 0.3s ease, padding-bottom 0s;
}
.draggable-item {
	cursor: grab;
	border: 2px solid transparent;
	transition: border-color 0.2s ease;
}
.design-mode .draggable-item {
	 animation: latent-glow 2.5s infinite alternate ease-in-out;
	 border-radius: 12px;
}
.design-mode .social-button,
.design-mode #socials-footer a,
.design-mode #public-profile-img,
.design-mode #image-actions-container button {
	pointer-events: none;
}
.design-mode .draggable-item.is-empty {
	display: none;
}
.sortable-ghost {	
	opacity: 0.1;
	background: #4f46e5;	
	border-radius: 12px;
}
.sortable-chosen {
	opacity: 0 !important;	
	cursor: grabbing;
}
.sortable-fallback {
	opacity: 1 !important;
	background: transparent !important;
	box-sizing: border-box; 
	color: var(--text-color);
}
.drag-handle {
	cursor: grab;
}

#cropper-modal-content img { max-width: 100%; display: block; }

#search-input { transition: width 0.3s ease-in-out, opacity 0.3s ease-in-out, padding 0.3s ease-in-out; }
#search-container.expanded #search-input { width: 180px; opacity: 1; padding-left: 1rem; padding-right: 1rem; }
@media (min-width: 640px) { #search-container.expanded #search-input { width: 200px; } }
#search-container #search-icon-btn .icon-search { display: block; }
#search-container #search-icon-btn .icon-x { display: none; }
#search-container.expanded #search-icon-btn .icon-search { display: none; }
#search-container.expanded #search-icon-btn .icon-x { display: block; }

#search-results {
	z-index: 40;
	transform-origin: top left;
	transition: transform 0.2s ease-out, opacity 0.2s ease-out;
}
#search-results.hidden {
	opacity: 0;
	transform: scale(0.95);
}

.accordion-content { max-height: 0; transition: max-height 0.5s ease-in-out; overflow: hidden; }
.accordion-item.open .accordion-content { max-height: 2000px; }
.accordion-item.open { overflow: visible; }
.accordion-item .accordion-icon { transition: transform 0.3s ease; }
.accordion-item.open .accordion-icon { transform: rotate(180deg); }

#settings-panel-content::-webkit-scrollbar, #settings-panel::-webkit-scrollbar { width: 8px; }
#settings-panel-content::-webkit-scrollbar-track, #settings-panel::-webkit-scrollbar-track { background: transparent; }
#settings-panel-content::-webkit-scrollbar-thumb, #settings-panel::-webkit-scrollbar-thumb { background-color: #4a5568; border-radius: 20px; border: 3px solid transparent; background-clip: content-box; }
#settings-panel-content::-webkit-scrollbar-thumb:hover, #settings-panel::-webkit-scrollbar-thumb:hover { background-color: #6b7280; }
#settings-panel-content, #settings-panel { scrollbar-width: thin; scrollbar-color: #4a5568 transparent; }

.icon-option-btn {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 100%;
	aspect-ratio: 1 / 1;
	background-color: #4a5568;
	border-radius: 0.5rem;
	color: #e5e7eb;
	cursor: pointer;
	transition: all 0.2s ease-in-out;
	border: 2px solid transparent;
}
.icon-option-btn:hover {
	background-color: #6b7280;
	transform: scale(1.05);
}
.icon-option-btn.selected-icon {
	background-color: #4f46e5;
	border-color: #818cf8;
	color: white;
}

#description-input {
	resize: none;
	overflow: hidden;
}

#font-selector-options {
	transform-origin: top;
	transition: transform 0.2s ease-out, opacity 0.2s ease-out;
}
#font-selector-options.hidden {
	transform: scaleY(0.95);
	opacity: 0;
	pointer-events: none;
}
#font-selector-btn .lucide-chevron-down {
	transition: transform 0.3s ease;
}
#custom-font-selector.open #font-selector-btn .lucide-chevron-down {
	transform: rotate(180deg);
}

@media (max-width: 639px) {
	body.overflow-hidden-mobile {
		overflow: hidden;
	}
}

.social-tabs-container {
	display: flex;
	gap: 1rem;
	min-height: 300px;
}

.social-tabs-nav {
	display: flex;
	flex-direction: column;
	gap: 0.5rem;
	flex-shrink: 0;
	border-right: 1px solid #4a5568;
	padding-right: 1rem;
}

.social-tab-button {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 40px;
	height: 40px;
	background-color: transparent;
	border-radius: 0.5rem;
	color: #9ca3af;
	cursor: pointer;
	transition: all 0.2s ease-in-out;
	border: 2px solid transparent;
}

.social-tab-button:hover {
	background-color: #4a5568;
	color: #e5e7eb;
}

.social-tab-button.active {
	background-color: #4f46e5;
	color: white;
	border-color: #818cf8;
}

.social-tabs-content {
	flex-grow: 1;
	min-width: 0;
}

.social-tab-pane {
	display: none;
	flex-direction: column;
	gap: 0.75rem;
}

.social-tab-pane.active {
	display: flex;
}
#social-buttons-section {
	display: flex;
	flex-wrap: wrap;
	width: 100%;
	max-width: 448px;
	margin-left: auto;
	margin-right: auto;
}

#social-buttons-section .social-button {
    width: 3.5rem;
    height: 3.5rem;
    flex-shrink: 0;
}

#social-buttons-section .social-button svg {
	width: 75%;
	height: 75%;
}

#socials-inputs-container svg {
	width: 24px;
	height: 24px;
}

.social-tabs-container .social-button svg {
	width: 20px;
	height: 20px;
}

#socials-footer {
	display: flex;
	justify-content: center;
	width: 100%;
}

.social-icons-wrapper {
	display: flex;
	justify-content: center;
	flex-wrap: wrap;
	gap: 1rem;
	width: 100%;
	max-width: 336px;
}

#socials-footer a {
	display: flex;
	justify-content: center;
	align-items: center;
	flex-shrink: 0;
}

#socials-footer svg {
	width: 28px;
	height: 28px;
}

@media (max-width: 639px) {
	#social-buttons-section {
		gap: 0.5rem;
	}
	#social-buttons-section .social-button {
		width: 3rem; 
		height: 3rem;
	}
}

@media (min-width: 640px) {
	.social-icons-wrapper {
		max-width: 392px;
		gap: 1.5rem;
	}
}

/* === Estilos para Video y Galería === */
.video-wrapper {
    position: relative;
    width: 100%;
    aspect-ratio: 16 / 9;
}

.design-mode .video-wrapper::after {
    content: '';
    position: absolute;
    inset: 0;
    z-index: 10;
    cursor: grab;
}

.draggable-item.is-empty {
    display: none !important;
}

/* Modal de Zoom Interactivo */
.zoom-nav-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    color: white;
    background-color: rgba(0,0,0,0.3);
    border-radius: 9999px;
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s ease;
}
.zoom-nav-btn:hover:not(:disabled) {
    background-color: rgba(0,0,0,0.5);
}
.zoom-nav-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
}
.zoom-nav-btn.left-4 { left: 1rem; }
.zoom-nav-btn.right-4 { right: 1rem; }

/* === Nuevos Estilos para la Galería === */

/* Selector de Estilo en el Panel */
.gallery-style-btn {
    transition: all 0.2s ease-in-out;
    border: 2px solid transparent;
}
.gallery-style-btn.active {
    background-color: #4f46e5;
    border-color: #818cf8;
    color: white;
}

/* Editor de Miniaturas en el Panel */
.gallery-editor-thumbnail {
    position: relative;
    aspect-ratio: 1 / 1;
    border-radius: 0.5rem;
    overflow: hidden;
    cursor: grab;
}
.gallery-editor-thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}
.gallery-editor-thumbnail .delete-thumb-btn {
    position: absolute;
    top: 4px;
    right: 4px;
    width: 24px;
    height: 24px;
    background-color: rgba(0,0,0,0.6);
    color: white;
    border-radius: 9999px;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transform: scale(0.8);
    transition: all 0.2s ease-in-out;
}
.gallery-editor-thumbnail:hover .delete-thumb-btn {
    opacity: 1;
    transform: scale(1);
}

/* Contenedor principal de la galería (para el modo diseño) */
[data-section="gallery"] {
    padding: 0.5rem;
}

/* Estilo Rectangular (por defecto) */
.gallery-container-rectangular {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.gallery-main-image {
    position: relative;
    width: 100%;
    aspect-ratio: 16 / 9;
    border-radius: 0.75rem;
    overflow: hidden;
    background-color: #374151;
}

.gallery-main-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.gallery-caption {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 0.75rem 1rem;
    background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
    color: white;
    font-size: 0.875rem;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.gallery-main-image:hover .gallery-caption,
.gallery-main-image-square:hover .gallery-caption {
    opacity: 1;
}

.gallery-thumbnails-strip {
    display: flex;
    gap: 0.5rem;
    overflow-x: auto;
    padding-bottom: 0.5rem;
}

/* Estilo Cuadrado (con miniaturas verticales) */
.gallery-container-square {
    width: 100%;
    display: grid;
    grid-template-columns: 3fr 1fr;
    gap: 0.5rem;
}

.gallery-main-image-square {
    position: relative;
    width: 100%;
    aspect-ratio: 1 / 1;
    border-radius: 0.75rem;
    overflow: hidden;
    background-color: #374151;
}

.gallery-main-image-square img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.gallery-thumbnails-vertical {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    max-height: 100%;
    overflow-y: auto;
    min-height: 0; /* <-- CORRECCIÓN: Evita que el contenedor se desborde en el grid */
}

/* === INICIO: NUEVOS ESTILOS DE SCROLLBAR PARA GALERÍA === */
.gallery-thumbnails-vertical::-webkit-scrollbar {
    width: 6px;
}
.gallery-thumbnails-vertical::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 3px;
}
.gallery-thumbnails-vertical::-webkit-scrollbar-thumb {
    background-color: #4b5563; /* Usamos un gris del tema */
    border-radius: 3px;
}
.gallery-thumbnails-vertical {
    scrollbar-width: thin;
    scrollbar-color: #4b5563 transparent;
}
/* === FIN: NUEVOS ESTILOS DE SCROLLBAR PARA GALERÍA === */


/* Estilos comunes para las miniaturas */
.gallery-thumbnail {
    flex-shrink: 0;
    width: 64px;
    height: 64px;
    border-radius: 0.5rem;
    overflow: hidden;
    cursor: pointer;
    border: 2px solid transparent;
    transition: border-color 0.3s ease;
    opacity: 0.7;
}

.gallery-thumbnails-vertical .gallery-thumbnail {
    width: 100%;
    height: auto;
    aspect-ratio: 1 / 1;
}

.gallery-thumbnail:hover {
    opacity: 1;
}

.gallery-thumbnail.active {
    border-color: var(--accent); 
    opacity: 1;
}

.gallery-thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Adaptación a móviles para el estilo cuadrado */
@media (max-width: 640px) {
    .gallery-container-square {
        grid-template-columns: 1fr;
    }
    .gallery-thumbnails-vertical {
        flex-direction: row;
        overflow-x: auto;
        padding-bottom: 0.5rem;
    }
    .gallery-thumbnails-vertical .gallery-thumbnail {
        width: 64px;
        height: 64px;
        flex-shrink: 0;
    }
}


